# @package _global_
framework:
  name: adatvae_lerp_all
  module:
    _target_: disent.frameworks.vae.supervised.AdaTripletVae
    beta: ${framework.beta}
    # tvae: triplet stuffs
    triplet_loss: triplet
    triplet_margin_min: 0.001
    triplet_margin_max: 1
    triplet_scale: 0.1
    triplet_p: 1
    # tvae: no loss from decoder -> encoder
    detach: FALSE
    detach_decoder: FALSE
    detach_no_kl: FALSE
    detach_logvar: NULL  # set to NULL to disable fixed value
    # adavae
    average_mode: NULL # ignored
    thresh_mode:  NULL # ignored
    thresh_ratio: 0.5
    # adatvae
    ada_triplet_sample: FALSE
    ada_triplet_loss: triplet_soft_ave
    ada_triplet_ratio: 0.5
    ada_triplet_soft_scale: 1.0

  # settings used elsewhere
  data_wrap_mode: triplet
  model_z_multiplier: 2

schedules:
  ada_triplet_ratio:
    _target_: disent.schedule.LinearSchedule
    min_step: 0
    max_step: ${trainer.steps}
  ada_triplet_soft_scale:
    _target_: disent.schedule.LinearSchedule
    min_step: 0
    max_step: ${trainer.steps}
  thresh_ratio:
    _target_: disent.schedule.LinearSchedule
    min_step: 0
    max_step: ${trainer.steps}
